version: '3.8'

services:
  # for development: starts fast, stops faster
  activemq-artemis-dev:
    stop_grace_period: 100ms
    image: apache/activemq-artemis:2.32.0
    container_name: activemq-artemis-dev
    ports:
      - "61613:61613" # stomp
      - "1883:1883" # mqtt
      - "8161:8161" # admin

    environment:
      ARTEMIS_USER: "admin"
      ARTEMIS_PASSWORD: "admin"
    healthcheck:
      test: ["CMD", "curl", "http://localhost:8161"]
      interval: 100ms
      timeout: 20s
      retries: 100
      start_period: 100ms
